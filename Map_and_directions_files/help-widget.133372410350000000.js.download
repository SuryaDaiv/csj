ysi.helpwidget={widgets:["email-us","call-us","text-us","rcc-text-us","rcc-chat-us","rcc-advocacy","schedule-a-tour","floorplan-assistant"],init:function(){const e=document.getElementById("help-widget");var t=document.querySelector("#btnFrontDesk");t&&t.addEventListener("click",function(){let e=document.getElementById("frontDesk-widget-wrapper");e.classList.toggle("close-widget"),e.classList.toggle("open-widget"),document.querySelector(".highlighted-layout")||t.classList.toggle("animation-bell"),e.classList.contains("close-widget")?(e.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false")):(e.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true")),ysi.helpwidget.setVerticalPosition(),lastBtn=e.querySelector("button:last-of-type"),lastBtn&&lastBtn.addEventListener("keydown",function(e){9!==e.keyCode||e.shiftKey||(e.preventDefault(),t.focus())});let n=document.querySelector("#rcc-advocacy-btn");if(n){let e=n.Tooltip;setTimeout(function(){e.show()},1e3),setTimeout(function(){e.hide()},3e3)}});var n=!0;[].forEach.call(document.querySelectorAll(".widget-btns"),function(e){e.addEventListener("click",function(){n=!1}),e.addEventListener("touchend",function(){e.Tooltip.delay=0,e.Tooltip.hide()})}),setTimeout(function(){document.getElementById("frontDesk-widget-wrapper").classList.contains("close-widget")&&(document.getElementById("btnFrontDesk").click(),setTimeout(function(){n&&document.getElementById("frontDesk-widget-wrapper").classList.contains("open-widget")&&document.getElementById("btnFrontDesk").click()},5e3))},5e3),ysi.helpwidget.widgets.forEach(function(e){[].forEach.call(document.querySelectorAll(".trigger-popup."+e+"-btn"),function(t){t.addEventListener("click",function(){ysi.helpwidget.toggleWindow(e,this),ysi.helpwidget.setVerticalPosition()})})});let o=document.querySelector("#acsBtn");if(o){let e=new Modal("#acsModal");o.addEventListener("click",function(){e.toggle()})}[].forEach.call(document.querySelectorAll(".popup-widgets-window button.close"),function(e){e.addEventListener("click",function(){let e=document.querySelector(".popup-widgets-window.open");if(ysi.helpwidget.toggleWindow(),e&&e.id){let t=e.id.replace("-window","");"rentcafe-conversations"===t&&(t=e.dataset.content);let n=document.querySelector("."+t+"-btn");"call-us"===t&&(n=document.querySelector("#call-us-btn")),n&&n.focus()}})});let i=ysi.cookie.read("active-help-window"),s=document.querySelector(".popup-widgets-window.open");if(s){if("rentcafe-conversations"===(i=s.id.replace("-window",""))&&(i=s.dataset.content),"floorplan-assistant"!==i||"floorplans"!==window.location.pathname.split("/").at(-2)){let e=document.getElementById(i+"-btn");s.style.transition="none",ysi.helpwidget.toggleWindow(i,e,!0),s.style.transition=""}}else{const e=document.getElementById("rccAppScript");if(e){let t=window.matchMedia("(max-width: 575px)").matches,n=e.dataset.autoinitiate&&"TRUE"===e.dataset.autoinitiate.toUpperCase(),o=document.getElementById("rentcafe-conversations-window"),i=document.getElementById("fireRccChat");o&&(t&&o.classList.remove("open"),n&&!t&&i&&setTimeout(function(){if(!document.querySelector(".popup-widgets-window.open")){o.dataset.content="rcc-chat-us";let e=document.getElementById("rentcafe-conversations-webchat-btn");ysi.helpwidget.toggleWindow("rcc-chat-us",e,!0)}},5e3))}}e.querySelectorAll(".popup-widgets-window.draggable").forEach(function(e){ysi.helpwidget.draggable.init(e)});let c=e.querySelector("#carouselResidentsPic");if(c){let e=new ysiCarousel(c);setTimeout(function(){e.interval=0},18e3)}},closeWindows:function(){this.toggleWindow()},toggleWindow:function(e,t,n){let o=document.querySelector(".popup-widgets-window.open"),i=e+"-window",s=document.getElementById(i);"rcc-chat-us"!==e&&"rcc-text-us"!==e&&"rcc-advocacy"!==e||s||(i="rentcafe-conversations-window",s=document.getElementById(i));let c=o&&s&&o===s&&"rentcafe-conversations-window"===i&&s.dataset.content!==e;if(s&&"rentcafe-conversations-window"===i&&(s.dataset.content=e),n||(document.cookie="active-help-window="+(e||"")+"; expires=0; path=/"),o&&s&&o!==s||c?(o.addEventListener("transitionend",function(){s.classList.add("open")},{once:!0}),o.classList.remove("open")):o&&!n?o.classList.remove("open"):s&&s.classList.add("open"),"email-us"===e&&(opendialog("help-widget-email-modal-body",t.dataset.modalUrl,ysi.modalContact.init),s.getElementsByClassName("close")[0].focus()),"call-us"===e&&(ysi.modal.setTrap(document.querySelector("#call-us-window")),s.getElementsByClassName("close")[0].focus()),"text-us"===e&&s.getElementsByClassName("close")[0].focus(),"floorplan-assistant"===e&&(ysi.fpa&&ysi.fpa.initFrontDesk(),ysi.modal.setTrap(document.querySelector("#floorplan-assistant-window")),s.querySelector(".close").focus()),"rentcafe-conversations-window"===i){ysi.modal.setTrap(document.querySelector("#rentcafe-conversations-window"));let t=s.querySelector("h3");t&&ysi.helpwidgetRCC&&(t.innerHTML=ysi.helpwidgetRCC.getWindowTitle("rcc-text-us"===e?"sms":"webchat")),s.getElementsByClassName("close")[0].focus()}if("schedule-a-tour"===e&&(ysi.scheduleTourIsDialog=!0,opendialog("help-widget-schedule-a-tour-modal-body",t.dataset.modalUrl,ysi.initScheduleTour),document.getElementById("schedule-a-tour-window").getElementsByClassName("close")[0].focus()),e&&"YCHAT"!==e.toUpperCase()){let e=document.querySelector(".yChat_popWindow");e&&!e.classList.contains("yChat_hide")&&ysi.yChatObject&&"open"===ysi.yChatObject.getState()&&ysi.yChatObject.toggle()}},toggleOmniWindow:function(e,t,n){window.postMessage({type:t.toUpperCase()+"_CLOSE_WINDOW"},"*")},setVerticalPosition:function(){ysi&&ysi.nudge&&ysi.nudge.dispatchNudgeChangedEvent()}},ysi.helpwidget.draggable=function(){let e,t,n,o,i,s,c,l=!1,a=0,d=0,r=5;function u(){e.style.transform="translate3d("+a+"px,"+d+"px, 0)"}function p(){let t=e,n=parseInt(getComputedStyle(t).getPropertyValue(c));t.style.transform="",t.style.transition="unset";let o=getComputedStyle(document.documentElement).getPropertyValue("--helpwidget-window-y-offset"),i=getComputedStyle(document.documentElement).getPropertyValue("--helpwidget-window-x-offset"),s=parseInt(o)+d,l="right"===c?parseInt(i)+a:parseInt(i)-a;document.documentElement.style.setProperty("--helpwidget-window-x-offset",l+"px");let u=n-parseInt(getComputedStyle(t).getPropertyValue(c));l=parseInt(i)+u;let p=document.getElementById("frontDesk-widget-horizontal");s>window.innerHeight-r-p.offsetTop&&(s=window.innerHeight-r-p.offsetTop),s<t.offsetHeight+r-p.offsetTop&&(s=t.offsetHeight+r-p.offsetTop),document.documentElement.style.setProperty("--helpwidget-window-x-offset",l+"px"),document.documentElement.style.setProperty("--helpwidget-window-y-offset",s+"px"),document.cookie="help-window-offset="+l+"|"+s+"|"+c+"; expires=0; path=/",d=0,a=0,t.offsetWidth,t.style.transition=""}return{init:function(r){const g=document.getElementById("help-widget");c=g.classList.contains("widget-left")?"left":"right",r.xOffset=0,r.yOffset=0,r.classList.contains("open")&&(e=r);let w=function(t){t.target.closest("button")&&(t.target.closest("button").classList.contains("close")||t.target.closest("button").classList.contains("menu"))?m.releasePointerCapture(t.pointerId):(e=r,m.setPointerCapture(t.pointerId),"touchstart"===t.type?(o=t.touches[0].clientX-a,i=t.touches[0].clientY-d):(o=t.clientX-a,i=t.clientY-d),l=!0,m.addEventListener("pointerup",dragEnd,!1),m.addEventListener("pointermove",drag,!1))};dragEnd=function(e){o=t,i=n,l=!1,s=requestAnimationFrame(p),m.releasePointerCapture(e.pointerId),m.removeEventListener("pointerup",dragEnd),m.removeEventListener("pointermove",drag)},drag=function(e){l&&(e.preventDefault(),"touchmove"===e.type?(t=e.touches[0].clientX-o,n=e.touches[0].clientY-i):(t=e.clientX-o,n=e.clientY-i),a=t,d=n,s=requestAnimationFrame(u))},r.addEventListener("transitionstart",function(){r.classList.contains("open")&&(e=r)});let m=r.querySelector(".modal-header");m&&m.addEventListener("pointerdown",w,!1)}}}(),ysi.registerCallback(ysi.helpwidget.init);