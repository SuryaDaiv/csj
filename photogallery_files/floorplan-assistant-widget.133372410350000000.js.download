ysi.fpa=ysi.fpa||{},ysi.fpa.isLoaded=!1,ysi.fpa.url=document.getElementById("floorplanAssistantUrlPattern").value,ysi.fpa.isFrontDesk=document.querySelector(".floorplan-assistant-btn"),ysi.fpa.selections={budget:null,numBeds:null,numBaths:null,hasPets:null,moveIn:null,numAmenities:null},ysi.fpa.amenitiesList=[],ysi.fpa.openNextScreen=function(e){e.currentTarget.parentElement.querySelectorAll(".btn-next").forEach(function(e){e.classList.remove("selected-option")}),e.currentTarget.classList.add("selected-option");var t=document.querySelector(".screen-active");t.classList.remove("screen-active"),t.nextElementSibling.classList.add("screen-active"),ysi.modal&&ysi.modal.setTrap(t.nextElementSibling)},ysi.fpa.initScreenNav=function(){document.querySelectorAll(".btn-next").forEach(function(e){e.addEventListener("click",ysi.fpa.openNextScreen)}),document.querySelectorAll(".back").forEach(function(e){e.addEventListener("click",function(e){var t=document.querySelector(".screen-active");t.classList.remove("screen-active"),t.previousElementSibling.classList.add("screen-active"),ysi.modal&&ysi.modal.setTrap(t.previousElementSibling)})}),document.querySelectorAll(".restart").forEach(function(e){e.addEventListener("click",function(e){e.currentTarget.parentElement.parentElement.parentElement.classList.remove("screen-active");var t=document.getElementById("fpaScreen1");t.classList.add("screen-active"),ysi.modal&&ysi.modal.setTrap(t)})}),document.querySelectorAll(".btn-nextFPA").forEach(function(e){e.addEventListener("click",function(t){e.parentElement.parentElement.classList.add("d-none"),e.parentElement.parentElement.nextElementSibling.classList.remove("d-none")})}),document.querySelectorAll(".btn-backFPA").forEach(function(e){e.addEventListener("click",function(t){e.parentElement.classList.add("d-none"),e.parentElement.previousElementSibling.classList.remove("d-none"),ysi.modal&&ysi.modal.setTrap(e.parentElement)})})},ysi.fpa.initAnswerClick=function(){document.querySelectorAll("#budget-screen input").forEach(function(e){e.addEventListener("click",function(){ysi.fpa.selections.budget=e.getAttribute("data-value"),document.querySelectorAll(".budget-selected .selected-value").forEach(function(t){t.innerText=e.parentElement.querySelector("label").innerText}),document.querySelectorAll("#budget-screen .btn-nextFPA, #budget-screen .btn-next").forEach(function(e){e.disabled=!1})})}),document.querySelectorAll("#numbeds-screen input").forEach(function(e){var t=e.dataset.value,n="0"===t?"Studio":"1"===t?"1 bedroom":t+" bedrooms";e.addEventListener("click",function(){ysi.fpa.selections.numBeds=t,document.querySelectorAll(".numbeds-selected .selected-value").forEach(function(e){e.innerText=n}),document.querySelectorAll("#numbeds-screen .btn-nextFPA, #numbeds-screen .btn-next").forEach(function(e){e.disabled=!1});let e=document.querySelector("#numbaths-screen .answer-set .list-unstyled"),a=function(e,t){return'<li class="custom-control custom-radio custom-control-inline mr-1 answer-option text-center inline animated fadeInLeft delay-'+(t+3)+'"><input data-value="'+e+'" data-selenium-id="fpabathrooms'+t+'" type="radio" id="fpabathrooms'+t+'" name="fpabathrooms" class="custom-control-input" aria-label="Option '+(t+1)+" is "+e+'"><label class="custom-control-label" for="fpabathrooms'+t+'">'+e+"</label></li>"};ysi.fpa.isFrontDesk&&(e=document.querySelector("#numbaths-screen .bathroom-answers"),a=function(e,t){return'<div class="form-check fpa-answer-option answer-option-radio mb-2 bg-light"><input data-value="'+e+'" id="bath'+t+'" type="radio" class="form-check-input" name="optradioBathrooms"><label for="bath'+t+'" class="form-check-label w-100 py-2"> '+e+" </label></div>"}),e.innerHTML="",ysi.fpa.bathroomCounts[parseInt(t)].sort().forEach(function(t,n){e.insertAdjacentHTML("beforeend",a(t,n))}),document.querySelectorAll("#numbaths-screen input").forEach(function(e){var t=e.getAttribute("data-value"),n=t+" bathroom"+("1"===t?"":"s");e.addEventListener("click",function(){ysi.fpa.selections.numBaths=t,document.querySelectorAll(".numbaths-selected .selected-value").forEach(function(e){e.innerText=n}),document.querySelectorAll("#numbaths-screen .btn-nextFPA, #numbaths-screen .btn-next").forEach(function(e){e.disabled=!1})})})})}),document.querySelectorAll("#pets-screen input").forEach(function(e){var t="1"===e.getAttribute("data-value"),n=t?"Something pet friendly":"No pets";e.addEventListener("click",function(){ysi.fpa.selections.hasPets=t,document.querySelectorAll(".pets-selected .selected-value").forEach(function(e){e.innerText=n}),document.querySelectorAll("#pets-screen .btn-nextFPA, #pets-screen .btn-next").forEach(function(e){e.disabled=!1})})}),document.querySelectorAll("#move-in-screen input").forEach(function(e){var t,n=parseInt(e.getAttribute("data-value"));t=0===n?"As soon as possible":1===n?"In the next few months":"No rush to move in",e.addEventListener("click",function(){ysi.fpa.selections.moveIn=n,document.querySelectorAll(".move-in-selected .selected-value").forEach(function(e){e.innerText=t}),document.querySelectorAll("#move-in-screen .btn-nextFPA, #move-in-screen .btn-next").forEach(function(e){e.disabled=!1})})})},ysi.fpa.initAmenities=function(){document.querySelectorAll("#amenities-screen input").forEach(function(e){e.addEventListener("click",function(e){e.currentTarget.classList.toggle("selected-option")})}),document.querySelector("#confirm-amenities").addEventListener("click",function(){var e=document.querySelectorAll(".custom-control-input.selected-option");ysi.fpa.isFrontDesk&&(e=document.querySelectorAll("#amenities-screen input.selected-option"));var t=e.length,n=String(t)+" "+(1===t?"amenity":"amenities");document.querySelector(".amenities-selected .selected-value").innerText=n,ysi.fpa.selections.numAmenities=t,ysi.fpa.amenitiesList=[].map.call(e,function(e){let t=e.innerText;return ysi.fpa.isFrontDesk&&(t=e.dataset.name),t})})},ysi.fpa.loadContactForm=function(){url="/contactus?IsDialog=1&IsFloorplanAssistant=true",ysi.fpa.url&&ysi.fpa.url.length>0&&(url=ysi.fpa.url+url),req=new XMLHttpRequest,req.onreadystatechange=function(){if(req.readyState===XMLHttpRequest.DONE){const t=document.getElementById("contact-form-container");t.innerHTML=req.responseText;var e=t.querySelector(".page-content-contact-us");e&&(t.innerHTML="",t.appendChild(e)),ysi.modalContact.init("contact-form-container",url),ysi.floatingLabels.init(t),ysi.fpa.initSubmit(),ysi.adwords&&ysi.adwords.setHiddenFields()}},req.open("GET",url),req.send()},ysi.fpa.initSubmit=function(){document.getElementById("load-floorplan-button").addEventListener("click",function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){if(ysi.fpa.isFrontDesk?document.getElementById("fpa-floorplan-screen").insertAdjacentHTML("afterbegin",e.responseText):document.getElementById("fpa-floorplan-screen").insertAdjacentHTML("beforeend",e.responseText),ysi.fpa.isFrontDesk)document.querySelector("#fpa-loading-screen").classList.add("d-none"),document.querySelector("#fpa-contact-screen").classList.remove("d-none");else{document.querySelector(".screen-active").classList.remove("screen-active");var t=document.getElementById("contact-form-screen");t.classList.add("screen-active")}if(ysi.modal&&ysi.modal.setTrap(t),ysi.recaptcha)if(ysi.scrollObserver.isSupported()){var n=document.getElementById("fpa-myContactForm");ysi.scrollObserver.init(n.querySelector(".recaptcha"),{transit:"in",offset:"500px",once:!0,callback:function(){ysi.recaptcha.init("fpacaptcha")}})}else ysi.recaptcha.init("fpacaptcha")}};var t="/ajaxhandler?handler=fpafloorplan";for(var n in ysi.fpa.isFrontDesk&&(t="/ajaxhandler?handler=frontdeskfpafloorplan"),ysi.fpa.selections)t+="&"+n+"="+ysi.fpa.selections[n];ysi.fpa.url&&ysi.fpa.url.length>0&&(t=ysi.fpa.url+t),e.open("GET",t),e.send()}),document.getElementById("fpa-contact-submit").addEventListener("click",function(){var e=document.getElementById("fpa-myContactForm");let t=new FormData(document.forms["fpa-myContactForm"]);if(null==e.querySelector("input:invalid")){var n=e.querySelector('input[name="prefix"]'),a=document.getElementById(n.value+"recaptcha-block");if(a)if(a.classList.contains("d-none"))event.stopImmediatePropagation(),e.classList.add("was-validated");else{var s=e.querySelector("[name='hide-captcha']"),i=document.getElementsByTagName("iframe");if(s&&0==s.value&&i&&document.getElementById("fpacaptcha")&&void 0!==grecaptcha&&ysi.recaptcha&&0===grecaptcha.getResponse(ysi.recaptcha.fpa).length)return a.classList.add("is-invalid"),event.preventDefault(),event.stopPropagation(),!1}var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&200===o.status&&console.log(o.responseText)},"function"==typeof fpa_lead_conversion&&(console.log("fpa lead conversion"),fpa_lead_conversion()),GASubmitFPATrack("Lead Success",ysi.fpa.selections.numBeds+" Bed(s)");var r=[];t.forEach(function(e,t){r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))});var c="Floorplan Assistant Data - ",l=document.getElementById("fpa-budget-"+ysi.fpa.selections.budget);l&&(c+="Budget: "+l.innerText),c+=", Beds: "+ysi.fpa.selections.numBeds,c+=", Baths: "+ysi.fpa.selections.numBaths,c+=", Pets: "+(ysi.fpa.selections.hasPets?"Yes":"No"),c+=", Move in: "+(0===ysi.fpa.selections.moveIn?"As soon as possible":1===ysi.fpa.selections.moveIn?"In the next few months":"No rush to move in"),c+=", Amenities: "+ysi.fpa.amenitiesList.toString(),document.getElementById("fpa-floorplan-name")&&(c+=", Interested in: "+document.getElementById("fpa-floorplan-name").innerText),r.push("Message="+encodeURIComponent(c));var d="/contactus?handler=FloorplanAssistant";if(ysi.fpa.url&&ysi.fpa.url.length>0&&(d=ysi.fpa.url+d),o.open("POST",d),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("RequestVerificationToken",document.querySelector('#contact-form-container input[name="request-verification-token"]').value),o.send(r.join("&")),ysi.fpa.isFrontDesk)document.querySelector("#fpa-contact-screen").classList.add("d-none"),document.querySelector("#fpa-floorplan-screen").classList.remove("d-none");else{var u=document.querySelector(".screen-active");u.classList.remove("screen-active"),u.nextElementSibling.classList.add("screen-active"),ysi.modal&&ysi.modal.setTrap(u.nextElementSibling)}}})},ysi.fpa.init=function(){ysi.fpa.isFrontDesk||document.getElementById("fpa-button").addEventListener("click",function(){if(!ysi.fpa.isLoaded){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE&&200===e.status){document.getElementById("fpa-screen-container").insertAdjacentHTML("beforeend",e.responseText),ysi.fpa.isLoaded=!0,ysi.fpa.initScreenNav(),ysi.fpa.initAnswerClick(),ysi.fpa.amenitiesSlideEnabled&&ysi.fpa.initAmenities(),ysi.fpa.loadContactForm();var t=document.querySelector(".screen-active");ysi.modal&&ysi.modal.setTrap(t)}};var t="/ajaxhandler?handler=FpaScreens";ysi.fpa.url&&ysi.fpa.url.length>0&&(t=ysi.fpa.url+t),e.open("GET",t),e.send()}})},ysi.fpa.initFrontDesk=function(){if(!ysi.fpa.isLoaded){let e="/ajaxhandler?handler=FrontDeskFpaScreens";ysi.fpa.url&&ysi.fpa.url.length>0&&(e=ysi.fpa.url+e),fetch(e).then(function(e){return e.ok?e.text():Promise.reject(e)}).then(function(e){document.querySelector("#help-widget-fpa-modal-body").insertAdjacentHTML("beforeend",e),ysi.fpa.isLoaded=!0,ysi.fpa.initScreenNav(),ysi.fpa.initAnswerClick(),ysi.fpa.amenitiesSlideEnabled&&ysi.fpa.initAmenities(),ysi.fpa.loadContactForm()})}},ysi.registerCallback(function(){ysi.fpa.init()});